<div class="h-full">
  <div
    #gridContainer
    class="h-full w-full grid grid-cols-7 auto-rows-fr bg-gray-300 gap-px"
  >
    <div
      *ngFor="let d of monthMap"
      class="grid-item py-2 bg-white flex flex-col overflow-visible"
    >
      <span class="px-2">{{ d.date.format('dd DD') }}</span>
      <div
        *ngFor="let segment of d.segments"
        class="bg-red-400 z-20 relative"
        (click)="toggleActive(segment.id)"
        [ngClass]="{
          'mx-2': segment.type == SegmentType.Single,
          'ml-2': segment.type == SegmentType.Start,
          'mr-2': segment.type == SegmentType.End,
          '-mx-[1px]': segment.type == SegmentType.Between,
          'bg-red-600': segment.active
        }"
      >
        <ng-container
          *ghValue="segment | appointmentReference : appointments; let app"
          [ngSwitch]="segment.type"
        >
          <div *ngSwitchCase="SegmentType.Start">
            <span>{{ app?.startDate?.format('HH:mm') }}</span>
            <span> {{ app?.title }}</span>
          </div>
          <div *ngSwitchCase="SegmentType.Between" class="h-6">
            {{ '' }}
          </div>
          <div *ngSwitchCase="SegmentType.End" class="text-right">
            <span>{{ app?.endDate?.format('HH:mm') }}</span>
          </div>
          <div *ngSwitchCase="SegmentType.Single" class="text-center">
            <span>{{ app?.startDate?.format('HH:mm') }}</span>
            <span> {{ app?.title }}</span>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>
